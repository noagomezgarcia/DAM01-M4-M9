<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 3 - Space shooter</title>
    <style>
        #capa {
            width: 50px;
            height: 50px;
            background-color: rgb(240, 101, 101);
            position: absolute;
            bottom: 200px;
        }

        .bala {
            width: 10px;
            height: 20px;
            background-color: black;
            position: absolute;
        }

        .boton{
            margin-bottom: 10px;
            width: 300px; height: 50px;
        }
    </style>
</head>

<body>
    <div id="capa"></div>
   
    <script>
        let capa = document.getElementById('capa');

        document.addEventListener("mousemove", (eventInfo) => {
            capa.style.left = `${eventInfo.clientX - capa.offsetWidth / 2}px`;
        });

        document.addEventListener("keydown", (event) => {
            if (event.code === "Space") {
                disparar();
            }
        });

        function disparar() {
            //Crear el elemento de la bala
            const bala = document.createElement("div");
            bala.classList.add("bala");

            //Posicionar la bala justo encima del cuadrado
            //getBoundingClientRect para saber la posición exacta actual
            const rect = capa.getBoundingClientRect();
            let x = rect.left + (rect.width / 2) - 5; //Centrado horizontal
            let y = rect.top; //Borde superior

            bala.style.left = `${x}px`;
            bala.style.top = `${y}px`;

            document.body.appendChild(bala);

            //Animación de la bala hacia arriba
            let posicionY = y;
            const intervalo = setInterval(() => {
                posicionY -= 10; //Velocidad de la bala
                bala.style.top = `${posicionY}px`;

                //Eliminar la bala si sale de la pantalla para no consumir memoria
                if (posicionY < -20) {
                    clearInterval(intervalo);
                    bala.remove();
                }
            }, 16); //~60 frames por segundo
        }
    </script>
</body>

</html>